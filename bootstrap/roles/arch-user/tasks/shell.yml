---
- name: install zsh
  pacman: name={{ item }} state=present
  with_items:
    - zsh
    - zsh-completions
  become: yes

- name: change default shell to zsh
  user: name={{ item }} shell=/usr/bin/zsh
  with_items:
    - root
    - "{{ archlinux_user_name }}"
  become: yes

- name: fetch dotfiles
  shell: git init && git remote add origin "{{ dotfiles_git }}"
  args:
    chdir: "/home/{{ archlinux_user_name }}"
    creates: ~/.git

- name: fetch dotfiles
  shell: git fetch && git reset --hard origin/master
  args:
    chdir: "/home/{{ archlinux_user_name }}"
